{% extends 'hod_templates/base_template.html' %}
{% block page_title %}
Home
{% endblock page_title %}
{% block main_content %}
<section class="content">
      <div class="container-fluid">
          <div class="row">
              <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-info">
                  <div class="inner">
                    <h3>{{students_count}}</h3>

                    <p>Total students</p>
                  </div>
                  <div class="icon">
                    <i class="ion ion-bag"></i>
                  </div>
                  <a href="{% url 'manage_student'%}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
              </div>
              <!-- ./col -->
              <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                  <div class="inner">
                    <h3>{{staffs_count}}</h3>

                    <p>Total Staff's</p>
                  </div>
                  <div class="icon">
                    <i class="ion ion-stats-bars"></i>
                  </div>
                  <a href="{% url 'manage_staff'%}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
          </div>
              <!-- ./col -->
              <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-warning">
                  <div class="inner">
                    <h3>{{course_count}}</h3>

                    <p>Courses</p>
                  </div>
                  <div class="icon">
                    <i class="ion ion-person-add"></i>
                  </div>
                  <a href="{% url 'manage_course'%}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
              </div>
              <!-- ./col -->
              <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-danger">
                  <div class="inner">
                    <h3>{{subject_count}}</h3>

                    <p>Subjects</p>
                  </div>
                  <div class="icon">
                    <i class="ion ion-pie-graph"></i>
                  </div>
                  <a href="{% url 'manage_subject'%}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
              </div>
              <!-- ./col -->
        </div>
          <div class="row">
                   <!-- PIE CHART -->
               <div class="col-lg-6">
                    <div class="card card-danger">
                      <div class="card-header">
                        <h3 class="card-title">Student And Staff Count</h3>

                        <div class="card-tools">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                          </button>
                          <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                        </div>
                      </div>
                      <div class="card-body">
                        <canvas id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                      </div>
                      <!-- /.card-body -->
                    </div>
               </div>
               <div class="col-lg-6">
                    <div class="card card-success">
                  <div class="card-header">
                    <h3 class="card-title">Total student in each course</h3>

                    <div class="card-tools">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                      </button>
                      <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                  </div>
                  <div class="card-body">
                    <canvas id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                  </div>
                  <!-- /.card-body -->
                </div>
               </div>
                <!-- /.card -->
                    <!-- /.card -->
          </div>
          <div class="row">
                <div class="col-lg-6">
                    <div class="card card-success">
                  <div class="card-header">
                    <h3 class="card-title">Total subjects in each course</h3>

                    <div class="card-tools">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                      </button>
                      <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                  </div>
                  <div class="card-body">
                    <canvas id="donutChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                  </div>
                  <!-- /.card-body -->
                </div>
               </div>
               <div class="col-lg-6">
                    <div class="card card-info">
                      <div class="card-header">
                        <h3 class="card-title">Total Student in Each Subject</h3>

                        <div class="card-tools">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                          </button>
                          <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                        </div>
                      </div>
                      <div class="card-body">
                        <canvas id="pieChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                      </div>
                      <!-- /.card-body -->
                    </div>
               </div>
          </div>
      </div><!-- /.container-fluid -->
    </section>
{% endblock main_content %}
{% block custom_js%}
<script>
    $(document).ready(function(){
          //Data For Piechart
          var student = {{students_count}}
          var staff = {{staffs_count}}
          var course_list = {{course_list | safe}}
          var student_list = {{Student_list}}
          var subject_list = {{subject_list}}
          var subject_name_list = {{subject_name_list | safe}}
          var subject_student_count = {{subject_student_count}}

          var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
          var donutChartCanvas2 = $('#donutChart2').get(0).getContext('2d')
          var PieData        = {
              labels: [
                  'Students',
                  'Staffs'
              ],
              datasets: [
                {
                  data: [student, staff],
                  backgroundColor : ['#f56954', '#00a65a'],
                }
              ]
          }

          var PieData2    = {
              labels: subject_name_list,
              datasets: [
                {
                  data: subject_student_count,
                  backgroundColor : ['#8a177a', '#ff9900', '#b8291a', '#2735cf', '#b492d4', '#d2d6de'],
                }
              ]
          }
          //For Donut Chart
          var donutData        = {
              labels:  course_list ,
              datasets: [
                {
                  data: student_list,
                  backgroundColor : ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc', '#d2d6de'],
                }
              ]
          }
           var donutData2        = {
              labels:  course_list ,
              datasets: [
                {
                  data: subject_list,
                  backgroundColor : ['#33ccff', '#1a998c', '#800000', '#ffcc00'],
                }
              ]
          }
        var donutOptions     = {
              maintainAspectRatio : false,
              responsive : true,
        }
        var donutOptions2     = {
              maintainAspectRatio : false,
              responsive : true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        var donutChart = new Chart(donutChartCanvas, {
          type: 'doughnut',
          data: donutData,
          options: donutOptions
        })

         var donutChart2 = new Chart(donutChartCanvas2, {
          type: 'doughnut',
          data: donutData2,
          options: donutOptions2
        })

        //-------------
        //- PIE CHART -
        //-------------
        // Get context with jQuery - using jQuery's .get() method.
        var pieChartCanvas = $('#pieChart').get(0).getContext('2d')
        var pieData        = PieData;
        var pieOptions     = {
          maintainAspectRatio : false,
          responsive : true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        var pieChart = new Chart(pieChartCanvas, {
          type: 'pie',
          data: pieData,
          options: pieOptions
        })

        //For piechart2
        var pieChartCanvas = $('#pieChart2').get(0).getContext('2d')
        var pieData        = PieData2;
        var pieOptions     = {
          maintainAspectRatio : false,
          responsive : true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        var pieChart = new Chart(pieChartCanvas, {
          type: 'pie',
          data: pieData,
          options: pieOptions
        })
    })
</script>
{% endblock custom_js%}
